---
- name: Clone git directories
  hosts: all
  gather_facts: false
  remote_user: slayed
  become: false
  tasks:
    - name: "Creates repositories directory"
      ansible.builtin.file:
        path: "/home/slayed/repositories"
        state: "directory"
        owner: "slayed"
        mode: '0755'
    - name: "Creates dotfiles directory"
      ansible.builtin.file:
        path: "/home/slayed/repositories/dotfiles"
        state: "directory"
        owner: "slayed"
        mode: '0755'
    - name: "Creates scripts directory"
      ansible.builtin.file:
        path: /home/slayed/repositories/scripts
        state: "directory"
        owner: "slayed"
        mode: '0755'
    - name: "Clone dotfiles"
      ansible.builtin.git:
        repo: "https://github.com/gnusd/dotfiles.git"
        dest: "/home/slayed/repositories/dotfiles/"
        clone: true
        update: true
        version: "tyrellCorp"
    - name: "Clone scripts"
      ansible.builtin.git:
        repo: "https://github.com/gnusd/scripts.git"
        dest: "/home/slayed/repositories/scripts/"
        clone: true
        update: true
        version: "master"
    - name: "Clone local-bin"
      ansible.builtin.git:
        repo: "https://github.com/gnusd/local-bin.git"
        dest: "/home/slayed/.local/bin/"
        clone: true
        update: true
        version: "tyrellCorp"
    - name: "Remove file"
      ansible.builtin.file:
        path: "/home/slayed/.bashrc"
        state: absent
    - name: "Symbolic link of .bashrc in dotfiles"
      ansible.builtin.file:
        src: "/home/slayed/repositories/dotfiles/.bashrc"
        dest: "/home/slayed/.bashrc"
        state: link
